<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ include file="/WEB-INF/jsp/student/share/taglib.jsp" %>
<%@ include file="/WEB-INF/jsp/student/share/basepath.jsp"  %> 


<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
 <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
 <META HTTP-EQUIV="Expires" CONTENT="0"> 
<meta http-equiv="content-type" content="no-cache, must-revalidate" />

<link href="css/updateIforma.css" type="text/css" rel="stylesheet" />
<link type="text/css" rel="stylesheet" href="css/calendar.css" >
<script type="text/javascript" src="js/jquery-2.1.1.js"></script>
<script type="text/javascript" src="js/calendar.js" ></script>  
<script type="text/javascript" src="js/calendar-zh.js" ></script>
<script type="text/javascript" src="js/calendar-setup.js"></script>
  <script type="text/javascript" src="js/projectAddOrUpdate.js"></script>
 <script type="text/javascript" charset="utf-8" src="richTextarea/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="richTextarea/ueditor.all.min.js"> </script>
  
    <script type="text/javascript" charset="utf-8" src="richTextarea/lang/zh-cn/zh-cn.js"></script> 

    
 <script type="text/javascript">
//textarea不在document的ready范围之内，所以需要加上此段程序	
	$(document).ready(function(){
		
		setTimeout("setContent()",100); 
		
	});</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>项目申报</title>
</head>
<body >	
	  <div class="right">
        <div class="right_top">
          <div class="xiangji">
           <img src="images/View_detailed.gif" width="21" height="19">
          </div>
         <div class="wenzi">
            项目申报
         </div> 
        </div>	
        <div class="xiantiao"><img src="images/xian.png" width="846" height="4">
        </div>
        
        <form action="" onsubmit="return jiaoyan('student/reportProject','申报成功','student/lookReportProjectUI','申报项目成功，即将返回......')">
     
			<div class="sanjiao">
        
       <span>项目名称:</span>
        <input style="border:solid #1E5DBA 1px;" type="text"  name="name" id="name"/>
        <span>申请总经费:</span>
        <input style="border:solid #1E5DBA 1px;" type="text"  name="funds" id="funds"/></p>
       
        <p><span>所属院系:</span>
                <select name="collegeId" id="collegeId" style="border:solid #1E5DBA 1px;margin-left:10px;padding:5px; width:200px;">  
                  	<core:forEach items="${colleges}" var="college">
                  		
                  		<option value="${college.key }" >${college.value }</option>
                  		
                  	</core:forEach>
                </select>
                
                
        <span style="margin-left:110px;">总负责人:</span>
                <select  name="principalId" id="principalId" style="border:solid #1E5DBA 1px; margin-left:15px; padding:5px; width:200px;" >  
                	<core:forEach items="${members}" var="member">
                
                    		<option value="${member.key }">${member.value}</option>
                    	
                    </core:forEach>  
                </select>
         </p>
         
       <span>开始时间:</span>
        <input style="border:solid #1E5DBA 1px;" type="text" value="${pp.startTime }" name="startTime" id="startTime" onclick="return showCalendar('startTime', 'y-mm-dd');"/>
        <span style="margin-left:116px;">结束时间:</span>
        <input style="border:solid #1E5DBA 1px;" type="text" value="${pp.endTime }" name="endTime" id="endTime" onclick="return showCalendar('endTime', 'y-mm-dd');"/></p>
        </div>
        <div class="xuxian" style="margin-top:-36px;">
        <p><span style="margin-left:66px;">指导老师:</span>
          
                <core:forEach begin="1" end="2" var="i">
                	<core:if test="${i==1}">
		                <select name="instructor1" id="instructor1" style="border:solid #1E5DBA 1px;margin-left:10px;padding:5px; width:210px; margin-top:60px;">  
		                    <core:forEach items="${instructors }" var="instructor">
		                    		<option  value="${instructor.key }">${instructor.value }</option>		              	
		                    </core:forEach>  
		                </select>
	                </core:if>
	              <core:if test="${i==2}">
		                <select name="instructor2" id="instructor2" style="border:solid #1E5DBA 1px;margin-left:10px;padding:5px; width:210px; margin-top:60px;">  
		                    <core:forEach items="${instructors }" var="instructor">
		                    	<option  value="${instructor.key }">${instructor.value }</option>
		                    </core:forEach>  
		                </select>
	                </core:if>
                </core:forEach>
       </span>
                
                
                
                
                
           <p style="margin-top:-15px"><span style="margin-left:66px;">项目成员:</span>
                
            	
            	
            	<core:forEach begin="1" end="4" var="i">
            		<core:if test="${i==1}">
           			    <select name="student1" id="student1" style="border:solid #1E5DBA 1px;margin-left:10px;padding:5px; width:210px;">  
		                    <core:forEach items="${members}" var="member">
		                    	<option  value="${member.key }">${member.value }</option>
		                    </core:forEach>      
              			</select>
           			</core:if>
           			<core:if test="${i==2}">
           			    <select name="student2" id="student2" style="border:solid #1E5DBA 1px;margin-left:10px;padding:5px; width:210px;">  
		                    <core:forEach items="${members}" var="member">
		                    	<option  value="${member.key }">${member.value }</option>
		                    </core:forEach>      
              			</select>
           			</core:if>
           			<core:if test="${i==3}">
           			    <select name="student3" id="student3" style="border:solid #1E5DBA 1px;margin-left:152px;padding:5px; width:210px;">  
		                    <core:forEach items="${members}" var="member">
		                    	<option  value="${member.key }">${member.value }</option>
		                    </core:forEach>      
              			</select>
           			</core:if>
           			<core:if test="${i==4}">
           			    <select name="student4" id="student4" style="border:solid #1E5DBA 1px;margin-left:10px;padding:5px; width:210px;">  
		                    <core:forEach items="${members}" var="member">
		                    	<option  value="${member.key }">${member.value }</option>
		                    </core:forEach>      
              			</select>
           			</core:if>
            	
            	</core:forEach>
               
           </p>
         
        <div class="xuxian" style="margin-top:-50px;">
       <span style="margin-left:68px;">项目简介:</span>
    <script id="editor" type="text/plain" style="width:950;height:250px;"></script>
   <div id="btns">
    <div>
        <button onclick="getAllHtml()">获得整个html的内容</button>
        <button onclick="getContent()">获得内容</button>
        <button onclick=" UE.getEditor('editor').setContent('sfdsfsfsdfafsdafsdfafafd', false);">写入内容</button>
        <button onclick="setContent(true)">追加内容</button>
        <button onclick="getContentTxt()">获得纯文本</button>
        <button onclick="getPlainTxt()">获得带格式的纯文本</button>
        <button onclick="hasContent()">判断是否有内容</button>
        <button onclick="setFocus()">使编辑器获得焦点</button>
        <button onmousedown="isFocus(event)">编辑器是否获得焦点</button>
        <button onmousedown="setblur(event)" >编辑器失去焦点</button>

    </div>
    <div>
        <button onclick="getText()">获得当前选中的文本</button>
        <button onclick="insertHtml()">插入给定的内容</button>
        <button id="enable" onclick="setEnabled()">可以编辑</button>
        <button onclick="setDisabled()">不可编辑</button>
        <button onclick=" UE.getEditor('editor').setHide()">隐藏编辑器</button>
        <button onclick=" UE.getEditor('editor').setShow()">显示编辑器</button>
        <button onclick=" UE.getEditor('editor').setHeight(300)">设置高度为300默认关闭了自动长高</button>
    </div>

    <div>
        <button onclick="getLocalData()" >获取草稿箱内容</button>
        <button onclick="clearLocalData()" >清空草稿箱</button>
    </div>

</div>
<div>
    <button onclick="createEditor()">
    创建编辑器</button>
    <button onclick="deleteEditor()">
    删除编辑器</button>
</div>
        <input type="hidden" id="description" name="description" value="">
          <div id="result" style="height: 20px;text-align: center;color: red">
   		
   			</div>
           <p style="margin:10px -40px;"><input type="submit" style="width:100px;margin-left:280px;" value="确定"/> 
           <input type="button" onclick="javascript:window.location.href='student/downloadReportBook'" style="width:100px;margin-left:110px;" value="下载项目申报书"/>
           </p>
        </form>
        </div>
        </div>
      </div>	
	<script type="text/javascript">

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('editor');


    function isFocus(e){
        alert(UE.getEditor('editor').isFocus());
        UE.dom.domUtils.preventDefault(e)
    }
    function setblur(e){
        UE.getEditor('editor').blur();
        UE.dom.domUtils.preventDefault(e)
    }
    function insertHtml() {
        var value = prompt('插入html代码', '');
        UE.getEditor('editor').execCommand('insertHtml', value)
    }
    function createEditor() {
        enableBtn();
        UE.getEditor('editor');
    }
    function getAllHtml() {
        alert(UE.getEditor('editor').getAllHtml())
    }
    function getContent() {
        var arr = [];
        arr.push("使用editor.getContent()方法可以获得编辑器的内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getContent());
        alert(arr.join("\n"));
    }
    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UE.getEditor('editor').getPlainTxt());
        alert(arr.join('\n'))
    }
    function setContent(isAppendTo) {
        var arr = [];
        arr.push("使用editor.setContent('欢迎使用ueditor')方法可以设置编辑器的内容");
        UE.getEditor('editor').setContent('欢迎使用ueditor', isAppendTo);
        alert(arr.join("\n"));
    }
    function setDisabled() {
        UE.getEditor('editor').setDisabled('fullscreen');
        disableBtn("enable");
    }

    function setEnabled() {
        UE.getEditor('editor').setEnabled();
        enableBtn();
    }

    function getText() {
        //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
        var range = UE.getEditor('editor').selection.getRange();
        range.select();
        var txt = UE.getEditor('editor').selection.getText();
        alert(txt)
    }

    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UE.getEditor('editor').getContentTxt());
        alert(arr.join("\n"));
    }
    function hasContent() {
        var arr = [];
        arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
        arr.push("判断结果为：");
        arr.push(UE.getEditor('editor').hasContents());
        alert(arr.join("\n"));
    }
    function setFocus() {
        UE.getEditor('editor').focus();
    }
    function deleteEditor() {
        disableBtn();
        UE.getEditor('editor').destroy();
    }
    function disableBtn(str) {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            if (btn.id == str) {
                UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
            } else {
                btn.setAttribute("disabled", "true");
            }
        }
    }
    function enableBtn() {
        var div = document.getElementById('btns');
        var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
        }
    }

    function getLocalData () {
        alert(UE.getEditor('editor').execCommand( "getlocaldata" ));
    }

    function clearLocalData () {
        UE.getEditor('editor').execCommand( "clearlocaldata" );
        alert("已清空草稿箱")
    }
</script>
</body>
</html>
